<script src='/js/chart.js'></script>
<style>
   div{
        width:1080px;
        height: 1920px;
    }
</style>
<h1 style="color: rgb(7, 206, 206);">
    <%- html %>
</h1>
<h2 id='n'>

</h2>
<div><canvas id="myChart"></canvas></div>
<script>
i=0
setInterval(()=>{i++;document.getElementById('n').innerText=`Page will refresh in ${60-i} seconds`;if(i>59){i=0}},1000)
setInterval(()=>{window.location.reload()},60000)
$=(a)=>{return document.querySelector(a).innerText}
     
     data=$('h1')
     if(data.match('page initilaizing please wait')){
       
     }
     data=data.split('\n')
     
     console.log(data)
     label=[]
     values=[]
     console.log('label',label,values)
     title=data[0]
     data.shift()
     data.forEach((e)=>{
     e=e.split(',')
     values.push(parseInt(e[0]))
     label.push(e[1])
 })
console.log()
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: label,
        datasets: [{
            label: title,
            data: values,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
